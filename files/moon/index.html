<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>月亮觀測實驗室 2.0</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="main-nav">
        <div class="nav-brand">月亮觀測實驗室</div>
        <div class="nav-links">
            <button onclick="router.navigate('phase')" id="nav-phase">實驗一：月相觀測</button>
            <button onclick="router.navigate('position')" id="nav-position">實驗二：軌跡觀測</button>
        </div>
    </nav>

<main id="view-phase" class="view-section">
    <div class="controls-container">
		<div class="control-row">
			<button onclick="exp1.changeMonth(-1)">⬅ 前個月</button>
			<button onclick="exp1.changeDay(-1)">◀ 前一天</button>
			
			<button onclick="exp1.setToday()" class="btn-primary" style="background: var(--accent-color); color: var(--bg-color);">今天</button>
			
			<input type="date" id="datePicker1">
			
			<button onclick="exp1.changeDay(1)">後一天 ▶</button>
			<button onclick="exp1.changeMonth(1)">下個月 ➡</button>
		</div>
        
        <div class="toggle-group mt-15" style="margin-top: 15px; display: flex; justify-content: center;">
            <button class="toggle-btn" id="btn-view-single" onclick="exp1.setView('single')">單日</button>
            <button class="toggle-btn" id="btn-view-month" onclick="exp1.setView('month')">單月</button>
            <button class="toggle-btn" id="btn-view-two" onclick="exp1.setView('two-months')">雙月</button>
			<div class="predict-controls" style="margin-top: 15px; text-align: center;">
    <select id="phaseSelector" onchange="exp1.predictPhases(this.value)" style="background: #0b0d17; color: white; border: 1px solid var(--border-color); padding: 4px; border-radius: 4px;">
        <option value="">-- 選擇月相 --</option>
        <option value="新月">新月 (初一)</option>
        <option value="上弦月">上弦月</option>
        <option value="滿月">滿月 (十五)</option>
        <option value="下弦月">下弦月</option>
    </select>
</div>
        </div>


<div id="predict-results" class="predict-grid" style="display: none;">
    </div>
    </div>
    
    <div id="phase-content">
        <div class="single-view-layout">
            <div id="largeMoon" class="large-moon"></div>
<div class="info-panel">
    <h2 id="displayDate1">--</h2>
    <div id="displayDateSub" class="sub-date"></div> 
    
    <div class="phase-header">
        <h3 id="phaseName" class="phase-title">--</h3>
        <div class="phase-meta">
            <span class="meta-item">月齡 <strong id="moonAge">--</strong></span>
            <span class="meta-divider">|</span>
            <span class="meta-item">照度 <strong id="illumination">--</strong></span>
        </div>
    </div>
    
    <p id="phaseDesc" class="description"></p>
</div>
        </div>
    </div>
</main>

<main id="view-position" class="view-section">
    <div class="sky-container">
        <div class="sky-bg">
                <div class="astro-meta">
                    出 <span id="riseTimeVal">--</span> | 落 <span id="setTimeVal">--</span>
                </div>
            <div class="sky-grids" id="skyGrids10"></div>
            <div id="skyMoon" class="sky-moon">
                <div id="skyMoonGraphic"></div>
                <div class="moon-info-bubble"><span id="altVal">0</span>° | <span id="azimuthVal">--</span></div>
            </div>
            <div class="sky-bottom-area">
                <div class="compass-labels"><span>東</span><span>南</span><span>西</span></div>
                <input type="range" id="timeSlider" class="integrated-slider">
            </div>
        </div>
    </div>

    <div class="compact-toolbar">
        <div class="toolbar-left">
            <div class="mode-pills">
                <button class="pill active" id="btn-pos-single" onclick="exp2.setMode('single')">單日</button>
                <button class="pill" id="btn-pos-path" onclick="exp2.setMode('path')">軌跡</button>
            </div>
        </div>

        <div class="toolbar-center">
            <div class="step-ctrls">
                <button onclick="exp2.stepTime(-60)" title="-1小時">«</button>
                <button onclick="exp2.stepTime(-10)" title="-10分鐘">‹</button>
            </div>
            
            <div class="time-display-wrapper">
                <span id="timeLabel" class="toolbar-time">20:00</span>

            </div>

            <div class="step-ctrls">
                <button onclick="exp2.stepTime(10)" title="+10分鐘">›</button>
                <button onclick="exp2.stepTime(60)" title="+1小時">»</button>
            </div>
        </div>

        <div class="toolbar-right">
            <input type="date" id="datePicker2" class="date-inline">
            <button class="btn-today-sm" onclick="exp2.setToday()">今</button>
        </div>
    </div>
</main>

    <script src="utils.js"></script>
    <script src="exp1.js"></script>
    <script src="exp2.js"></script>
    <script src="main.js"></script>
</body>
</html>