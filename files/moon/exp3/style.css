:root {
    --bg-color: #0b0d17;
    --panel-bg: #15192b;
    --text-color: #e0e6ed;
    --text-muted: #a0a8c0;
    --accent-color: #ffd700;
    --border-color: #2a304a;
    --lunar-color: #64ffda;
    --nav-height: 70px;
}

body {
    font-family: 'Segoe UI', "Microsoft JhengHei", sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    margin: 0; padding: 15px;
    display: flex; flex-direction: column; align-items: center;
    overflow-x: hidden;
}

.main-nav {
    display: flex; justify-content: space-between; align-items: center;
    width: 100%; max-width: 1000px; height: var(--nav-height);
    padding: 0 20px; background: var(--panel-bg);
    border-radius: 12px; margin-bottom: 20px; box-sizing: border-box;
    border: 1px solid var(--border-color);
}

.nav-back-btn { background: #2a304a; color: var(--accent-color); text-decoration: none; padding: 6px 12px; border-radius: 6px; font-size: 0.9rem; transition: 0.2s; }
.nav-back-btn:hover { background: #3a4266; }

.obs-container {
    width: 100%; max-width: 1000px; height: 480px;
    background: radial-gradient(circle at 50% 100%, #1a2a4a 0%, #05070a 100%);
    border-radius: 16px; position: relative;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden; border: 2px solid var(--border-color);
    box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
}

.observer-box {
    width: 600px; height: 400px; position: relative;
    transform-origin: 300px 340px; 
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 翻轉邏輯：文字與圖示需再次翻轉以抵銷 scaleX(-1) */
.observer-box.east-side { transform: scaleX(-1); }
.observer-box.east-side .flip-fix,
.observer-box.east-side .obs-center-icon,
.observer-box.east-side .obs-moon { transform: translate(-50%, -50%) scaleX(-1); }

/* 文字特殊處理（SVG text 錨點不同） */
.observer-box.east-side text.flip-fix { transform: scaleX(-1); transform-box: fill-box; transform-origin: center; }

.obs-hud-left {
    position: absolute; top: 20px; left: 20px; z-index: 50;
    background: rgba(21, 25, 43, 0.85); padding: 15px;
    border-radius: 12px; border: 1px solid var(--border-color);
    backdrop-filter: blur(5px);
}

.checkbox-label { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; cursor: pointer; margin-bottom: 8px; color: var(--text-muted); }
.checkbox-label:hover { color: #fff; }

.obs-center-icon {
    position: absolute; transform: translate(-50%, -50%);
    font-size: 3.5rem; z-index: 5; cursor: pointer; user-select: none;
    transition: transform 0.2s;
}
.obs-center-icon:active { transform: translate(-50%, -50%) scale(0.9); }

.obs-moon { position: absolute; z-index: 10; transform: translate(-50%, -50%); pointer-events: none; filter: drop-shadow(0 0 10px rgba(255,255,255,0.3)); }

.protractor-text { font-size: 14px; fill: rgba(255,255,255,0.6); font-family: monospace; }
.guide-text { font-size: 13px; fill: var(--accent-color); font-weight: bold; }

.unified-control-panel { width: 100%; max-width: 1000px; margin-top: 15px; }
.slider-full-width { padding: 10px 0; }

.compact-toolbar {
    display: flex; align-items: center; justify-content: space-between;
    background: var(--panel-bg); padding: 15px 25px; border-radius: 12px;
    border: 1px solid var(--border-color);
}

.toolbar-center { display: flex; align-items: center; gap: 20px; }
.toolbar-time { 
    font-size: 2.5rem; font-weight: bold; color: var(--accent-color); 
    font-family: "Courier New", monospace; min-width: 140px; text-align: center;
}

.step-ctrls button { 
    background: rgba(255,255,255,0.05); border: 1px solid var(--border-color); 
    color: var(--text-muted); font-size: 1.5rem; cursor: pointer; 
    width: 45px; height: 45px; border-radius: 50%; transition: 0.2s;
}
.step-ctrls button:hover { background: var(--accent-color); color: var(--bg-color); }

.date-capsule { background: #0b0d17; border: 1px solid var(--border-color); padding: 10px 18px; border-radius: 10px; cursor: pointer; text-align: right; }
.date-main { font-weight: bold; font-size: 1rem; color: #fff; }
.date-sub { color: var(--lunar-color); font-size: 0.8rem; margin-top: 2px; }

.integrated-slider { 
    width: 100%; appearance: none; background: #2a304a; height: 8px; border-radius: 4px; cursor: pointer; 
}
.integrated-slider::-webkit-slider-thumb {
    appearance: none; width: 24px; height: 24px; background: var(--accent-color);
    border-radius: 50%; box-shadow: 0 0 15px rgba(255,215,0,0.5); border: 2px solid #fff;
}