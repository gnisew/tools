<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>全反射實驗室</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="app">
    <div class="top-bar">
        <div class="flex items-center gap-4">
            <a href="../index.html" class="px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded text-sm font-bold transition">
                <span>⬅ 返回</span>
            </a>
            <h1 class="text-sm md:text-base font-bold text-slate-200">全反射物理實驗</h1>
        </div>
    </div>

    <div class="canvas-area" ref="containerRef">
        <canvas ref="canvasRef" @contextmenu.prevent></canvas>

        <div class="media-menu">
            <div class="text-xs font-bold text-slate-500 mb-2 tracking-widest">選擇介質</div>
            <label v-for="(info, key) in mediaOptions" :key="key" 
                   class="flex items-center gap-3 cursor-pointer group opacity-80 hover:opacity-100 transition"
                   v-show="key !== 'air'">
                <input type="radio" :value="key" v-model="simParams.selectedMedia" 
                       class="w-4 h-4 cursor-pointer"
                       :style="{ accentColor: info.color }">
                <span class="font-bold text-sm tracking-widest" :style="{ color: info.color }">
                    {{ info.name }} (n={{ info.n }})
                </span>
            </label>
        </div>

        <div class="source-handle" 
             :style="{ left: simParams.sourceX + 'px', top: simParams.sourceY + 'px' }"
             @pointerdown="handleStart">
            <div class="handle-core"></div>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>