/* Safe area for mobile */
.pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 20px);
}

/* Scrollbar hiding */
.no-scrollbar::-webkit-scrollbar {
    display: none;
}
.no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* Animations */
@keyframes bounce-subtle {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}
.animate-bounce-subtle {
    animation: bounce-subtle 2s infinite ease-in-out;
}

@keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
}
.animate-fade-in {
    animation: fade-in 0.3s ease-out forwards;
}

@keyframes scale-in {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}
.animate-scale-in {
    animation: scale-in 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Drag and Drop Visuals */
.draggable-source {
    opacity: 0.4;
    border: 2px dashed #6366f1;
}

.draggable-over {
    background-color: #e0e7ff; /* indigo-100 */
    border-left: 4px solid #4338ca; /* indigo-700 */
}

/* Utility for conditional rendering */
.hidden {
    display: none !important;
}

/* --- Custom Sets & Tabs --- */
.tab-btn {
    @apply px-6 py-2 rounded-full font-bold text-sm transition-all border-2 border-transparent;
}
.tab-btn.active {
    @apply bg-indigo-600 text-white shadow-md border-indigo-600;
}
.tab-btn.inactive {
    @apply bg-white text-gray-500 hover:bg-gray-50 border-gray-200;
}

/* --- Modal Overlay --- */
.modal-overlay {
    background-color: rgba(17, 24, 39, 0.7);
    backdrop-filter: blur(4px);
}
.modal-content {
    max-height: 90vh;
    overflow-y: auto;
}

/* --- Toast Notification --- */
.toast-enter {
    transform: translateY(100%);
    opacity: 0;
}
.toast-enter-active {
    transform: translateY(0);
    opacity: 1;
    transition: all 0.3s ease-out;
}
.toast-exit {
    transform: translateY(0);
    opacity: 1;
}
.toast-exit-active {
    transform: translateY(100%);
    opacity: 0;
    transition: all 0.3s ease-in;
}

/* --- Custom Input Modal --- */
.input-modal-overlay {
    background-color: rgba(17, 24, 39, 0.8); /* 更深一點的背景，讓焦點更集中 */
    backdrop-filter: blur(4px);
}

.input-field-focus:focus {
    box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2); /* Indigo ring */
    border-color: #4f46e5;
}

/* --- Nav Collapsed State Adjustments --- */

/* 當導航收合時，首頁浮動按鈕往下降 */
body.nav-collapsed #home-floating-container {
    bottom: 10px !important; /* 距離底部留一點空間給右側的收合按鈕 */
}

/* 當導航收合時，故事頁的單字庫貼底 */
body.nav-collapsed #story-footer {
    bottom: 0px !important;
    padding-bottom: 20px; /* 手機上增加底部留白較好按 */
}

/* --- Story Mode Enhancements --- */

/* 模糊效果 (用於隱藏英文時) */
.text-blur {
    filter: blur(6px);
    user-select: none;
    transition: filter 0.3s ease;
    opacity: 0.7;
}
.text-blur:hover {
    filter: blur(0);
    opacity: 1;
}

/* 句子區塊互動效果 */
.sentence-card {
    transition: all 0.2s ease-in-out;
    border-left: 3px solid transparent;
}
.sentence-card:hover {
    background-color: #f8fafc; /* slate-50 */
    border-left-color: #6366f1; /* indigo-500 */
}

/* 播放按鈕微動畫 */
.play-icon {
    opacity: 0;
    transform: translateX(-5px);
    transition: all 0.2s ease;
}
.sentence-card:hover .play-icon {
    opacity: 1;
    transform: translateX(0);
}

/* --- Timer & Quiz Enhancements --- */

/* 計時器樣式 */
.timer-badge {
    font-variant-numeric: tabular-nums; 
}

/* 空格內的數字編號 */
.blank-number {
    display: inline-block;
    color: #9ca3af; /* gray-400 */
    font-size: 0.75rem; /* text-xs */
    font-weight: bold;
    user-select: none;
}
/* 空格區塊 */
.blank-slot {
    min-width: 80px; /* 稍微縮小最小寬度 */
    height: 2rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    margin: 0 4px;
    padding: 0 8px;
    border-bottom-width: 2px;
    border-radius: 6px;
    transition: all 0.2s;
    cursor: pointer;
}